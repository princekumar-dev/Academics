import{r as a,a as Qe,R as Te,u as je,b as Xe,c as et,L as N,B as tt,d as ot,e as L}from"./react-vendor-07fa9950.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function s(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=s(n);fetch(n.href,l)}})();var Oe={exports:{}},ce={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rt=a,nt=Symbol.for("react.element"),st=Symbol.for("react.fragment"),it=Object.prototype.hasOwnProperty,at=rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lt={key:!0,ref:!0,__self:!0,__source:!0};function ze(c,o,s){var r,n={},l=null,h=null;s!==void 0&&(l=""+s),o.key!==void 0&&(l=""+o.key),o.ref!==void 0&&(h=o.ref);for(r in o)it.call(o,r)&&!lt.hasOwnProperty(r)&&(n[r]=o[r]);if(c&&c.defaultProps)for(r in o=c.defaultProps,o)n[r]===void 0&&(n[r]=o[r]);return{$$typeof:nt,type:c,key:l,ref:h,props:n,_owner:at.current}}ce.Fragment=st;ce.jsx=ze;ce.jsxs=ze;Oe.exports=ce;var xe=Oe.exports;const X=xe.Fragment,e=xe.jsx,i=xe.jsxs;var be={},Le=Qe;be.createRoot=Le.createRoot,be.hydrateRoot=Le.hydrateRoot;const ct="modulepreload",dt=function(c){return"/"+c},_e={},_=function(o,s,r){if(!s||s.length===0)return o();const n=document.getElementsByTagName("link");return Promise.all(s.map(l=>{if(l=dt(l),l in _e)return;_e[l]=!0;const h=l.endsWith(".css"),g=h?'[rel="stylesheet"]':"";if(!!r)for(let p=n.length-1;p>=0;p--){const b=n[p];if(b.href===l&&(!h||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${g}`))return;const d=document.createElement("link");if(d.rel=h?"stylesheet":ct,h||(d.as="script",d.crossOrigin=""),d.href=l,document.head.appendChild(d),h)return new Promise((p,b)=>{d.addEventListener("load",p),d.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>o()).catch(l=>{const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=l,window.dispatchEvent(h),!h.defaultPrevented)throw l})};function re({className:c=""}){return e("div",{className:`animate-pulse bg-gray-200 rounded ${c}`})}function ut(){return i("div",{className:"p-4",children:[e(re,{className:"h-8 w-1/3 mb-4"}),e(re,{className:"h-4 w-1/2 mb-6"}),i("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e(re,{className:"h-40"}),e(re,{className:"h-40"}),e(re,{className:"h-40"}),e(re,{className:"h-40"})]})]})}class mt extends Te.Component{constructor(o){super(o),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(o){return{hasError:!0}}componentDidCatch(o,s){console.error("Error caught by boundary:",o,s),this.setState({error:o,errorInfo:s})}render(){return this.state.hasError?e("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i("div",{className:"max-w-md mx-auto text-center",children:[e("div",{className:"mb-4",children:e("svg",{className:"mx-auto h-12 w-12 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Oops! Something went wrong"}),e("p",{className:"text-gray-600 mb-4",children:"We're sorry, but there was an error loading the application."}),e("button",{onClick:()=>window.location.reload(),className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",children:"Reload Page"}),!1]})}):this.props.children}}class ht{constructor(){this.registration=null,this.subscription=null}isSupported(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window}getPermission(){return this.isSupported()?Notification.permission:"unsupported"}async requestPermission(){if(!this.isSupported())return console.warn("Push notifications are not supported in this browser"),alert(`âš ï¸ Your browser does not support notifications.

Please use Chrome, Edge, or Firefox.`),!1;try{if(Notification.permission==="granted")return console.log("âœ… Notification permission already granted"),!0;if(Notification.permission==="denied"){console.warn("âŒ Notifications are blocked. Please enable them in browser settings.");const s=navigator.userAgent.includes("Chrome")&&!navigator.userAgent.includes("Edge"),r=navigator.userAgent.includes("Edg");let n=`âŒ Notifications are blocked!

To enable notifications:

`;return r?(n+=`1. Click the ðŸ”’ lock icon in the address bar
`,n+=`2. Click "Permissions for this site"
`,n+=`3. Find "Notifications" and select "Allow"
`,n+="4. Refresh the page"):s?(n+=`1. Click the ðŸ”’ lock icon in the address bar
`,n+=`2. Click "Site settings"
`,n+=`3. Find "Notifications" and select "Allow"
`,n+="4. Refresh the page"):n+=`Go to Settings > Privacy > Notifications
and allow notifications for this site.`,alert(n),!1}console.log("ðŸ“¢ Requesting notification permission...");const o=await Notification.requestPermission();return console.log("Notification permission result:",o),o==="granted"?(console.log("âœ… Notification permission granted!"),(navigator.platform.includes("Win")||navigator.userAgent.includes("Windows"))&&(console.log("ðŸªŸ Windows detected - sending test notification..."),setTimeout(()=>{this.showTestNotification()},500)),!0):o==="denied"?(console.warn("âŒ User denied notification permission"),alert(`âš ï¸ Notifications were blocked.

You won't receive event reminders.
You can enable them later in Settings.`),!1):(console.log("â„¹ï¸ User dismissed notification permission request"),!1)}catch(o){return console.error("âŒ Error requesting notification permission:",o),alert("âš ï¸ Error enabling notifications: "+o.message),!1}}showTestNotification(){if(Notification.permission==="granted")try{const o=new Notification("ðŸŽ‰ Notifications Enabled!",{body:`MSEC Academics notifications are working!
You will receive event reminders here.`,icon:"/images/android-chrome-192x192.png",badge:"/images/favicon-32x32.png",tag:"test-notification-"+Date.now(),requireInteraction:!1,silent:!1,timestamp:Date.now(),vibrate:[200,100,200],renotify:!0,dir:"auto",lang:"en-US"});o.onclick=function(s){s.preventDefault(),window.focus(),o.close()},setTimeout(()=>{o.close()},5e3),console.log("âœ… Test notification sent successfully")}catch(o){console.error("âŒ Error showing test notification:",o),this.registration&&this.registration.showNotification("ðŸŽ‰ Notifications Enabled!",{body:"MSEC Academics notifications are working!",icon:"/images/android-chrome-192x192.png",tag:"test-notification-"+Date.now()})}}async registerServiceWorker(){if(!("serviceWorker"in navigator))return console.warn("Service Worker not supported"),null;try{const o=await navigator.serviceWorker.register("/service-worker.js",{scope:"/"});return console.log("Service Worker registered:",o),this.registration=o,await navigator.serviceWorker.ready,console.log("Service Worker is ready"),o}catch(o){return console.error("Service Worker registration failed:",o),null}}async getVapidPublicKey(){try{const o=await fetch("/api/notifications/vapid-public-key");return o.ok?(await o.json()).publicKey:(console.warn("Failed to fetch VAPID key from server, using fallback"),"BI3ZQwdtuxxYpepMvZjy5xkuzLbnsjG8J1jfBkGMi0AzbhWDocIASZkq6ocisfwCTnYCHuogo_O-PJSuyfGWwkU")}catch(o){return console.error("Error fetching VAPID key:",o),"BI3ZQwdtuxxYpepMvZjy5xkuzLbnsjG8J1jfBkGMi0AzbhWDocIASZkq6ocisfwCTnYCHuogo_O-PJSuyfGWwkU"}}async subscribe(){if(this.registration||await this.registerServiceWorker(),!this.registration)return console.error("Service Worker registration required"),null;try{let o=localStorage.getItem("userEmail");if(!o){const r=localStorage.getItem("auth");if(r)try{o=JSON.parse(r).email}catch{}}if(!o)return alert("Please login again to enable notifications"),null;let s=await this.registration.pushManager.getSubscription();if(!s){const r=await this.getVapidPublicKey();s=await this.registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.urlBase64ToUint8Array(r)})}return this.subscription=s,await this.sendSubscriptionToServer(s,o),this.setUserPrefEnabled(!0),s}catch(o){return console.error("âŒ Failed to subscribe to push notifications:",o),null}}async unsubscribe(){if(!this.subscription){const o=await navigator.serviceWorker.ready;this.subscription=await o.pushManager.getSubscription()}if(this.subscription)try{return await this.subscription.unsubscribe(),await this.removeSubscriptionFromServer(this.subscription),this.subscription=null,this.setUserPrefEnabled(!1),!0}catch(o){return console.error("Failed to unsubscribe:",o),!1}return this.setUserPrefEnabled(!1),!1}async sendSubscriptionToServer(o,s=null){var r;try{if(!s&&(s=localStorage.getItem("userEmail"),!s)){const l=localStorage.getItem("auth");if(l)try{s=JSON.parse(l).email}catch(h){console.error("Error parsing auth data:",h)}}if(console.log("ðŸ’¾ Sending subscription to server...",{hasSubscription:!!o,userEmail:s,endpoint:((r=o==null?void 0:o.endpoint)==null?void 0:r.substring(0,50))+"..."}),!s)return console.error("âŒ No userEmail found in localStorage"),alert("Please login again to enable push notifications."),!1;const n=await fetch("/api/notifications/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:o,userEmail:s})});if(n.ok){const l=await n.json();return console.log("âœ… Subscription sent to server successfully:",l),l.message&&l.message.includes("reassigned")&&console.log("ðŸ”„ This browser subscription was reassigned from a previous user"),!0}else{const l=await n.json().catch(()=>({}));return console.error("âŒ Failed to send subscription to server:",n.status,l),!1}}catch(n){return console.error("âŒ Error sending subscription to server:",n),!1}}async removeSubscriptionFromServer(o){var s;try{let r=localStorage.getItem("userEmail");if(!r){const l=localStorage.getItem("auth");if(l)try{r=JSON.parse(l).email}catch(h){console.error("Error parsing auth data:",h)}}if(console.log("Removing subscription from server...",{hasSubscription:!!o,userEmail:r,endpoint:((s=o==null?void 0:o.endpoint)==null?void 0:s.substring(0,50))+"..."}),!r)return console.error("No userEmail found in localStorage"),!1;const n=await fetch("/api/notifications/unsubscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({endpoint:o.endpoint,userEmail:r})});if(n.ok)return console.log("Subscription removed from server successfully"),!0;{const l=await n.json().catch(()=>({}));return console.error("Failed to remove subscription:",n.status,l),!1}}catch(r){return console.error("Error removing subscription from server:",r),!1}}async showLocalNotification(o,s={}){try{if(this.registration||(console.log("No service worker registration, attempting to register..."),await this.registerServiceWorker()),Notification.permission!=="granted"&&(console.log("Notification permission not granted, requesting..."),!await this.requestPermission()))throw console.warn("Notification permission denied"),new Error("Notification permission denied");const n={...{body:"",icon:"/images/android-chrome-192x192.png",badge:"/images/favicon-32x32.png",vibrate:[200,100,200],tag:"msec-notification-"+Date.now(),requireInteraction:!1,data:{},timestamp:Date.now()},...s};if(this.registration&&this.registration.showNotification)console.log("Using service worker showNotification"),await this.registration.showNotification(o,n);else if("serviceWorker"in navigator){console.log("Attempting to get service worker registration...");const l=await navigator.serviceWorker.getRegistration();if(l)console.log("Found service worker registration, using showNotification"),await l.showNotification(o,n);else if(console.log("No service worker found, using direct Notification API"),"Notification"in window)new Notification(o,n);else throw new Error("Notifications not supported")}else if(console.log("Service worker not supported, using direct Notification API"),"Notification"in window)new Notification(o,n);else throw new Error("Notifications not supported");console.log("Notification displayed successfully")}catch(r){throw console.error("Error showing notification:",r),r}}urlBase64ToUint8Array(o){const s="=".repeat((4-o.length%4)%4),r=(o+s).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(r),l=new Uint8Array(n.length);for(let h=0;h<n.length;++h)l[h]=n.charCodeAt(h);return l}getUserPrefEnabled(){try{const o=localStorage.getItem("auth"),s=localStorage.getItem("userEmail")||(o?JSON.parse(o).email:null);if(!s)return null;const r=`notifications:${s}:enabled`,n=localStorage.getItem(r);return n===null?null:n==="true"}catch{return null}}setUserPrefEnabled(o){try{const s=localStorage.getItem("auth"),r=localStorage.getItem("userEmail")||(s?JSON.parse(s).email:null);if(!r)return;const n=`notifications:${r}:enabled`;localStorage.setItem(n,o?"true":"false")}catch{}}async initialize(){var o;if(!this.isSupported())return console.warn("Push notifications not supported"),!1;try{await this.registerServiceWorker();const s=this.getUserPrefEnabled();if(Notification.permission==="granted"){const r=await((o=this.registration)==null?void 0:o.pushManager.getSubscription());return r&&(this.subscription=r,s===!0?await this.sendSubscriptionToServer(r):console.log("Skipping auto-resync due to user preference OFF")),!0}return!1}catch(s){return console.error("Error initializing notifications:",s),!1}}async checkCurrentSubscription(){this.registration||await this.registerServiceWorker();try{const o=await this.registration.pushManager.getSubscription();if(!o)return console.log("â„¹ï¸ No push subscription exists in this browser"),{found:!1};const s=await fetch("/api/subscription-check",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({endpoint:o.endpoint})});if(!s.ok)return console.error("âŒ Failed to check subscription:",s.status),{error:"Failed to check subscription"};const r=await s.json();return r.found?(console.log(`ðŸ” This browser is subscribed as: ${r.userEmail}`),{found:!0,userEmail:r.userEmail,active:r.active,endpoint:o.endpoint}):(console.log("ðŸ” This subscription is not registered to any user"),{found:!1})}catch(o){return console.error("âŒ Error checking subscription:",o),{error:o.message}}}async handleLogout(){var o;try{let s=localStorage.getItem("userEmail");if(!s){const n=localStorage.getItem("auth");if(n)try{s=JSON.parse(n).email}catch{}}if(!s)return console.log("â“ No user email found during logout"),!1;await fetch("/api/notifications/deactivate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:s})}).catch(()=>{}),this.registration||await this.registerServiceWorker();const r=await((o=this.registration)==null?void 0:o.pushManager.getSubscription());return r&&await fetch("/api/notifications/deactivate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:s,endpoint:r.endpoint})}).catch(()=>{}),this.subscription=null,!0}catch(s){return console.error("âŒ Error in handleLogout:",s),!1}}}const ee=new ht,pt=()=>ee.requestPermission(),gt=()=>ee.subscribe(),ft=()=>ee.unsubscribe(),Ae=(c,o)=>ee.showLocalNotification(c,o),Ie=()=>ee.isSupported(),bt=()=>ee.getPermission(),xt=()=>ee.checkCurrentSubscription();function wt({isOpen:c,onClose:o,userEmail:s,userRole:r,isMobile:n=!1}){const l=je(),h=a.useRef(null),g=a.useRef(null),P=a.useRef(null),[d,p]=a.useState("draw"),[b,w]=a.useState(null),[v,E]=a.useState(!1),[D,j]=a.useState(!0),[te,ne]=a.useState(!1),[J,T]=a.useState("default"),[H,oe]=a.useState(!1),[M,se]=a.useState(!1),[de,U]=a.useState(!1),[ue,u]=a.useState(!1),[x,W]=a.useState(!1),[S,O]=a.useState(""),[R,B]=a.useState(""),[Y,C]=a.useState(""),[A,k]=a.useState(""),[G,le]=a.useState(!1),[me,ie]=a.useState(""),[q,Ue]=a.useState(()=>typeof window>"u"?!1:window.matchMedia("(max-width: 768px)").matches),Z=n||q,[he,qe]=a.useState(0),z=a.useRef(!0);a.useEffect(()=>{if(n)return;const t=m=>{h.current&&!h.current.contains(m.target)&&(M||o())};return c&&document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[c,o,n]),a.useEffect(()=>{if(n)return;const t=m=>{m.key==="Escape"&&c&&o()};return c&&document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[c,o,n]),a.useEffect(()=>{if(z.current=!0,!(n||q))return;let t,m,f;if(c){t=document.body.style.overflow,m=document.body.style.position,f=document.body.style.width,document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%";const y=()=>{document.body.style.overflow=t,document.body.style.position=m,document.body.style.width=f};return window.addEventListener("settingsModalClose",y),()=>{y(),window.removeEventListener("settingsModalClose",y)}}else document.body.style.overflow="",document.body.style.position="",document.body.style.width=""},[c,n,q]),a.useEffect(()=>()=>{z.current=!1},[]),a.useEffect(()=>{if(!c)return;let t=!1;return se(!0),(async()=>{try{const f=Ie();t||ne(f);const y=f?bt():"default";t||T(y);const V=localStorage.getItem("userSettings");if(V)try{const I=JSON.parse(V);t||j(I.emailNotifications!==!1),t||(typeof I.notificationsEnabled=="boolean"?E(I.notificationsEnabled):E(!1));try{const $=await xt();$&&$.found&&(z.current&&!t&&E(!0),F("notificationsEnabled",!0))}catch($){console.error("Error checking current subscription on open:",$)}}catch(I){console.error("Error loading settings:",I),t||E(!1)}else t||E(!1)}finally{!t&&z.current&&se(!1)}})(),()=>{t=!0}},[c]),a.useEffect(()=>{if(typeof window>"u")return;const t=()=>{const m=window.matchMedia("(max-width: 768px)").matches;Ue(m);const f=document.querySelector("header"),y=f?Math.ceil(f.getBoundingClientRect().height):0;qe(y)};return t(),window.addEventListener("resize",t),window.addEventListener("orientationchange",t),()=>{window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t)}},[]);const F=(t,m)=>{const y={...JSON.parse(localStorage.getItem("userSettings")||"{}"),[t]:m};localStorage.setItem("userSettings",JSON.stringify(y))},we=t=>{if(!g.current)return;W(!0);const m=g.current,f=m.getContext("2d"),y=m.getBoundingClientRect(),V=(t.touches?t.touches[0].clientX:t.clientX)-y.left,I=(t.touches?t.touches[0].clientY:t.clientY)-y.top;f.beginPath(),f.moveTo(V,I)},ve=t=>{if(!x||!g.current)return;const m=g.current,f=m.getContext("2d"),y=m.getBoundingClientRect(),V=(t.touches?t.touches[0].clientX:t.clientX)-y.left,I=(t.touches?t.touches[0].clientY:t.clientY)-y.top;f.lineWidth=2,f.lineCap="round",f.strokeStyle="#000",f.lineTo(V,I),f.stroke()},pe=()=>{W(!1)},Fe=()=>{d==="draw"&&g.current?g.current.getContext("2d").clearRect(0,0,g.current.width,g.current.height):d==="upload"&&(w(null),P.current&&(P.current.value=""))},Ve=t=>{var y;const m=(y=t.target.files)==null?void 0:y[0];if(!m)return;if(!m.type.match(/image\/(jpeg|jpg|png)/)){alert("Please upload a JPEG or PNG image");return}if(m.size>2*1024*1024){alert("Image size must be less than 2MB");return}const f=new FileReader;f.onload=V=>{const I=new Image;I.onload=()=>{const $=document.createElement("canvas"),Ze=$.getContext("2d"),ge=400,fe=150;let K=I.width,Q=I.height;K>ge&&(Q=Q*ge/K,K=ge),Q>fe&&(K=K*fe/Q,Q=fe),$.width=K,$.height=Q,Ze.drawImage(I,0,0,K,Q);const Ke=$.toDataURL("image/png");w(Ke)},I.src=V.target.result},f.readAsDataURL(m)},Je=async()=>{let t=null;if(d==="draw"){if(!g.current)return;t=g.current.toDataURL("image/png")}else if(d==="upload"){if(!b){alert("Please upload a signature image");return}t=b}if(t)try{const m=localStorage.getItem("userId");if(!m){alert("User ID not found. Please log in again.");return}const f=await fetch(`/api/users?action=update-signature&userId=${m}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({eSignature:t})}),y=await f.json();if(!f.ok||!y.success){alert("Failed to save signature: "+(y.error||"Unknown error"));return}ie("saved"),setTimeout(()=>ie(""),2e3),U(!1),alert("âœ“ Signature saved successfully!")}catch(m){console.error("Error saving signature:",m),alert("Error: "+m.message)}},He=async()=>{if(k(""),!S||!R||!Y){k("All fields are required");return}if(R!==Y){k("New passwords do not match");return}if(R.length<6){k("New password must be at least 6 characters");return}le(!0);try{const t=localStorage.getItem("userId");if(!t){k("User ID not found. Please log in again.");return}const m=await fetch(`/api/users?action=reset-password&userId=${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:S,newPassword:R})}),f=await m.json();if(!m.ok||!f.success){k(f.error||"Failed to reset password");return}alert("âœ“ Password changed successfully!"),O(""),B(""),C(""),u(!1)}catch(t){console.error("Error resetting password:",t),k("Error: "+t.message)}finally{le(!1)}};a.useEffect(()=>{const t=JSON.parse(localStorage.getItem("userSettings")||"{}");t.notificationsEnabled=v,localStorage.setItem("userSettings",JSON.stringify(t))},[v]);const ye=a.useRef(v);a.useEffect(()=>{ye.current=v},[v]),a.useEffect(()=>{const t=()=>{try{F("notificationsEnabled",ye.current)}catch(m){console.error("Error saving notificationsEnabled on close:",m)}};return window.addEventListener("settingsModalClose",t),()=>window.removeEventListener("settingsModalClose",t)},[]);const Ye=async()=>{if(console.log("=== NOTIFICATION SYSTEM STATUS ==="),console.log("1. Browser Support:",Ie()),console.log("2. Notification Permission:",Notification.permission),console.log("3. Service Worker Support:","serviceWorker"in navigator),console.log("4. Push Manager Support:","PushManager"in window),console.log("5. User Email:",s),console.log("6. User Role:",r),"serviceWorker"in navigator)try{const t=await navigator.serviceWorker.ready;console.log("7. Service Worker Status:",t.active?"Active":"Inactive");const m=await t.pushManager.getSubscription();console.log("8. Push Subscription:",m?"Subscribed":"Not Subscribed"),m&&console.log("   - Endpoint:",m.endpoint.substring(0,50)+"...")}catch(t){console.error("7-8. Service Worker/Subscription Error:",t)}console.log("9. Notifications Enabled State:",v),console.log("10. Email Notifications:",D),console.log("==================================")},Ne=async()=>{if(await Ye(),v){E(!1),F("notificationsEnabled",!1),oe(!0);try{console.log("ðŸ”• Attempting to disable notifications..."),await ft(),z.current&&T("default"),console.log("âœ… Notifications disabled successfully")}catch(t){console.error("âŒ Error disabling notifications:",t),z.current&&E(!0),F("notificationsEnabled",!0),alert("Failed to disable notifications: "+t.message)}finally{z.current&&oe(!1)}}else{E(!0),F("notificationsEnabled",!0),oe(!0);try{console.log("ðŸ”” Attempting to enable notifications...");const t=await pt();if(console.log("Permission result:",t),t){console.log("ðŸ“ Subscribing to notifications...");const m=await gt();console.log("Subscription result:",m),z.current&&T("granted");try{await Ae("Notifications Enabled",{body:"ðŸŽ‰ You will now receive important updates about your academics!",tag:"notification-enabled-"+Date.now()})}catch{}console.log("âœ… Notifications enabled successfully")}else console.warn("âŒ Permission denied"),z.current&&E(!1),F("notificationsEnabled",!1),alert("Please allow notifications in your browser settings to receive updates.")}catch(t){console.error("âŒ Error enabling notifications:",t),z.current&&E(!1),F("notificationsEnabled",!1),alert("Failed to enable notifications: "+t.message)}finally{z.current&&oe(!1)}}},ke=async()=>{try{if(console.log("Test notification button clicked"),console.log("Notification permission:",Notification.permission),console.log("Notifications enabled:",v),Notification.permission!=="granted"){alert("Please enable notifications first by toggling the Push Notifications switch above.");return}const t=Date.now(),m=`test-notification-${t}`;console.log("Attempting to show test notification with tag:",m),await Ae("Test Notification ðŸ””",{body:`This is a test notification from MSEC Academics! Time: ${new Date().toLocaleTimeString()}`,icon:"/images/android-chrome-192x192.png",badge:"/images/favicon-32x32.png",tag:m,requireInteraction:!1,vibrate:[200,100,200],timestamp:t,silent:!1,data:{url:window.location.origin,timestamp:t}}),console.log("Test notification sent successfully using service worker")}catch(t){console.error("Error sending test notification:",t),alert("Failed to send test notification: "+t.message)}},Se=()=>{const t=!D;j(t),F("emailNotifications",t)},Ee=t=>{t.stopPropagation(),t.preventDefault();const m="mailto:support@msecacademics.edu?subject=MSEC Academics Support Request&body=Hello MSEC Academics Team,%0D%0A%0D%0APlease describe your issue or question here:%0D%0A%0D%0A";window.location.href=m,setTimeout(()=>{o()},300)},Ce=()=>{try{typeof o=="function"&&o()}catch(t){console.error("Error closing settings modal before logout:",t)}localStorage.removeItem("auth"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userEmail"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),window.dispatchEvent(new Event("authStateChanged"));try{l("/login")}catch{window.location.href="/login"}};if(!c)return typeof window<"u"&&window.dispatchEvent(new Event("settingsModalClose")),null;const Ge=`settings-modal-${s}-${Date.now()}`,Pe=i(X,{children:[Z&&q&&e("div",{className:"fixed inset-0 z-40 bg-black/10 backdrop-blur-md cursor-pointer",style:{top:`${he}px`},onClick:t=>{t.stopPropagation(),M||o()},onTouchEnd:t=>{t.stopPropagation(),M||o()}}),e("div",{ref:h,onClick:t=>t.stopPropagation(),onTouchStart:t=>t.stopPropagation(),onTouchEnd:t=>t.stopPropagation(),onTouchMove:t=>t.stopPropagation(),onMouseDown:t=>t.stopPropagation(),className:Z?q?"mobile-fullwidth-settings":"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm no-mobile-backdrop p-4":"absolute top-full right-0 mt-2 w-80 sm:w-96 p-3 z-50 desktop-offset",style:{WebkitTapHighlightColor:"transparent",touchAction:Z?"manipulation":"auto",userSelect:Z?"none":"auto",WebkitUserSelect:Z?"none":"auto",maxWidth:"100vw",boxSizing:"border-box",paddingTop:n?"env(safe-area-inset-top, 12px)":void 0,...q?{"--header-offset":`${he+64}px`,top:`${he+64}px`}:{}},children:i("div",{className:(q?"inner-panel":"settings-glass-card no-mobile-backdrop")+" rounded-xl shadow-lg overflow-hidden w-full max-w-sm mx-auto max-h-[90vh] flex flex-col group",style:{boxShadow:"0 8px 28px rgba(2,6,23,0.06)"},onMouseEnter:()=>{!n&&typeof document<"u"&&document.body.classList.add("settings-hover-active")},onMouseLeave:()=>{!n&&typeof document<"u"&&document.body.classList.remove("settings-hover-active")},children:[e("button",{type:"button",onClick:t=>{t.stopPropagation(),t.preventDefault(),M||o()},onTouchEnd:t=>{t.stopPropagation(),t.preventDefault(),M||o()},className:`absolute z-10 w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200 active:bg-gray-300 transition-colors touch-manipulation ${q?"top-3 right-3 sm:top-4 sm:right-4":"top-3 right-3"}`,"aria-label":"Close settings",style:{touchAction:"manipulation",boxSizing:"border-box"},children:e("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),e("div",{className:"px-4 sm:px-4 py-3 sm:py-4 border-b border-[#e7edf4] hover:bg-gray-50/50 transition-colors duration-200",children:i("div",{className:"flex items-center gap-3 pr-6",children:[e("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center flex-shrink-0 group-hover:shadow-md group-hover:scale-105 transition-all duration-200",children:e("span",{className:"text-base font-bold text-yellow-600 group-hover:text-yellow-700 transition-colors duration-200",children:s==null?void 0:s.charAt(0).toUpperCase()})}),i("div",{className:"flex-1 min-w-0",children:[e("h3",{className:"text-[#0b1220] font-semibold text-sm truncate group-hover:text-black transition-colors duration-200",children:s}),i("p",{className:"text-[#475569] text-xs capitalize group-hover:text-[#374151] transition-colors duration-200",children:[r," Account"]})]})]})}),i("div",{className:"px-3 sm:px-4 py-3 sm:py-4 space-y-4 sm:space-y-5 flex-1 overflow-y-auto overflow-x-hidden smooth-scroll settings-content",style:{WebkitOverflowScrolling:"touch",overscrollBehavior:"contain",touchAction:Z?"pan-y":"auto",WebkitTapHighlightColor:"transparent",scrollBehavior:"smooth",willChange:"scroll-position",width:"100%",boxSizing:"border-box"},children:[i("div",{children:[i("h4",{className:"text-sm font-semibold text-[#111418] group-hover:text-[#0b1220] mb-2 flex items-center gap-2 transition-colors duration-200",children:[e("svg",{className:"w-4 h-4 group-hover:text-yellow-600 transition-colors duration-200",fill:"currentColor",viewBox:"0 0 20 20",children:e("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),"Account"]}),i("div",{className:"space-y-2",children:[i("button",{type:"button",onClick:t=>{t.stopPropagation(),t.preventDefault(),U(!0)},onTouchEnd:t=>{t.stopPropagation(),t.preventDefault(),U(!0)},className:"w-full flex items-center gap-3 p-3 rounded-lg bg-white/6 hover:bg-white/12 hover:shadow-sm active:bg-white/5 transition-all duration-200 text-left min-h-[52px] touch-manipulation cursor-pointer group",style:{touchAction:"manipulation"},children:[e("svg",{className:"w-4 h-4 text-[#60758a] group-hover:text-[#4a5568] flex-shrink-0 transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),i("div",{className:"flex-1 min-w-0",children:[e("p",{className:"text-sm font-medium text-[#111418] group-hover:text-[#0b1220] transition-colors duration-200",children:"Add Signature"}),e("p",{className:"text-xs text-[#60758a] group-hover:text-[#4a5568] mt-0.5 transition-colors duration-200",children:"Draw your digital signature for PDFs"})]}),e("svg",{className:"w-4 h-4 text-[#60758a] group-hover:text-[#4a5568] group-hover:translate-x-1 flex-shrink-0 transition-all duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),i("button",{type:"button",onClick:t=>{t.stopPropagation(),t.preventDefault(),u(!0),k("")},onTouchEnd:t=>{t.stopPropagation(),t.preventDefault(),u(!0),k("")},className:"w-full flex items-center gap-3 p-3 rounded-lg bg-white/6 hover:bg-white/12 hover:shadow-sm active:bg-white/5 transition-all duration-200 text-left min-h-[52px] touch-manipulation cursor-pointer group",style:{touchAction:"manipulation"},children:[e("svg",{className:"w-4 h-4 text-[#60758a] group-hover:text-[#4a5568] flex-shrink-0 transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),i("div",{className:"flex-1 min-w-0",children:[e("p",{className:"text-sm font-medium text-[#111418] group-hover:text-[#0b1220] transition-colors duration-200",children:"Reset Password"}),e("p",{className:"text-xs text-[#60758a] group-hover:text-[#4a5568] mt-0.5 transition-colors duration-200",children:"Change your account password"})]}),e("svg",{className:"w-4 h-4 text-[#60758a] group-hover:text-[#4a5568] group-hover:translate-x-1 flex-shrink-0 transition-all duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),i("div",{className:"border-t border-[#e7edf4] pt-3",children:[i("h4",{className:"text-sm font-semibold text-[#111418] group-hover:text-[#0b1220] mb-2 flex items-center gap-2 transition-colors duration-200",children:[e("svg",{className:"w-4 h-4 group-hover:text-yellow-600 transition-colors duration-200",fill:"currentColor",viewBox:"0 0 20 20",children:e("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})}),"Notifications"]}),!te&&e("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-2 mb-2",children:i("p",{className:"text-xs text-yellow-700 flex items-center gap-1",children:[e("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Browser notifications not supported"]})}),J==="denied"&&e("div",{className:"bg-red-50 border border-red-200 rounded-md p-2 mb-2",children:i("p",{className:"text-xs text-red-700 flex items-center gap-1",children:[e("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Notifications blocked. Enable in browser settings."]})}),v&&J==="granted"&&e("div",{className:"bg-green-50 border border-green-200 rounded-md p-2 mb-2",children:i("p",{className:"text-xs text-green-700 flex items-center gap-1",children:[e("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Notifications enabled successfully!"]})}),i("div",{className:"space-y-3",children:[i("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/6 min-h-[52px]",children:[i("div",{className:"flex-1 pr-3 min-w-0",children:[e("p",{className:"text-sm font-medium text-[#111418]",children:"Push Notifications"}),e("p",{className:"text-xs text-[#60758a] mt-0.5",children:"Get academic notifications"})]}),e("div",{className:"flex-shrink-0",children:e("button",{type:"button",onClick:t=>{t.stopPropagation(),t.preventDefault(),!H&&te&&J!=="denied"&&Ne()},onTouchEnd:t=>{t.stopPropagation(),t.preventDefault(),!H&&te&&J!=="denied"&&Ne()},disabled:H||!te||J==="denied",className:`toggle-switch ${v?"enabled":"disabled"} ${H?"toggle-loading":""} disabled:opacity-50 disabled:cursor-not-allowed touch-manipulation`,style:{touchAction:"manipulation"},"aria-label":`${v?"Disable":"Enable"} push notifications`,children:H?e("div",{className:"toggle-knob",children:i("svg",{className:"animate-spin h-3 w-3 text-theme-gold-600 mx-auto",fill:"none",viewBox:"0 0 24 24",children:[e("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):e("div",{className:`toggle-knob ${v?"enabled":"disabled"}`})})})]}),v&&i("button",{type:"button",onClick:t=>{t.stopPropagation(),t.preventDefault(),ke()},onTouchEnd:t=>{t.stopPropagation(),t.preventDefault(),ke()},className:"w-full flex items-center justify-center gap-1 p-2 rounded-md bg-white/6 hover:bg-white/12 hover:shadow-sm active:bg-white/5 text-theme-gold hover:text-yellow-600 text-xs font-semibold transition-all duration-200 min-h-[36px] touch-manipulation cursor-pointer group",style:{touchAction:"manipulation"},children:[e("svg",{className:"w-4 h-4 group-hover:scale-110 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Send Test Notification"]}),i("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/6 min-h-[52px]",children:[i("div",{className:"flex-1 pr-3 min-w-0",children:[e("p",{className:"text-sm font-medium text-[#111418]",children:"Email Notifications"}),e("p",{className:"text-xs text-[#60758a] mt-0.5",children:"Receive academic updates via email"})]}),e("div",{className:"flex-shrink-0",children:e("button",{type:"button",onClick:t=>{t.stopPropagation(),t.preventDefault(),Se()},onTouchEnd:t=>{t.stopPropagation(),t.preventDefault(),Se()},className:`toggle-switch ${D?"enabled":"disabled"} touch-manipulation`,style:{touchAction:"manipulation"},"aria-label":`${D?"Disable":"Enable"} email notifications`,children:e("div",{className:`toggle-knob ${D?"enabled":"disabled"}`})})})]})]})]}),i("div",{className:"border-t border-[#e7edf4] pt-3",children:[i("h4",{className:"text-sm font-semibold text-[#111418] group-hover:text-[#0b1220] mb-2 flex items-center gap-2 transition-colors duration-200",children:[e("svg",{className:"w-4 h-4 group-hover:text-yellow-600 transition-colors duration-200",fill:"currentColor",viewBox:"0 0 20 20",children:e("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})}),"Help & Support"]}),e("div",{className:"space-y-2",children:i("button",{type:"button",onClick:Ee,onTouchEnd:Ee,className:"w-full flex items-center gap-3 p-3 rounded-lg bg-white/6 hover:bg-white/12 hover:shadow-sm active:bg-white/5 transition-all duration-200 text-left min-h-[52px] touch-manipulation cursor-pointer group",style:{touchAction:"manipulation"},children:[e("svg",{className:"w-4 h-4 text-[#60758a] group-hover:text-[#4a5568] flex-shrink-0 transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e("span",{className:"text-sm font-medium text-[#111418] group-hover:text-[#0b1220] flex-1 transition-colors duration-200",children:"Email Support"}),e("svg",{className:"w-4 h-4 text-[#60758a] group-hover:text-[#4a5568] group-hover:translate-x-1 group-hover:-translate-y-1 flex-shrink-0 transition-all duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})})]})]}),de&&e("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:i("div",{className:"bg-white rounded-3xl p-6 w-full max-w-md shadow-2xl",children:[e("h2",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Add Your Signature"}),e("p",{className:"text-sm text-gray-600 mb-5",children:"This signature will be used in generated PDFs"}),i("div",{className:"flex gap-2 mb-5 bg-gray-100 p-1 rounded-lg",children:[e("button",{onClick:()=>p("draw"),className:`flex-1 py-2.5 px-4 rounded-md font-semibold text-sm transition-all ${d==="draw"?"bg-white text-gray-900 shadow-md":"text-gray-600 hover:text-gray-900"}`,children:"âœï¸ Draw"}),e("button",{onClick:()=>p("upload"),className:`flex-1 py-2.5 px-4 rounded-md font-semibold text-sm transition-all ${d==="upload"?"bg-white text-gray-900 shadow-md":"text-gray-600 hover:text-gray-900"}`,children:"ðŸ“¤ Upload"})]}),d==="draw"&&e("div",{className:"mb-5 border-2 border-gray-300 rounded-xl overflow-hidden bg-white",style:{height:"160px"},children:e("canvas",{ref:g,width:400,height:160,onMouseDown:we,onMouseMove:ve,onMouseUp:pe,onMouseLeave:pe,onTouchStart:we,onTouchMove:ve,onTouchEnd:pe,className:"w-full h-full cursor-crosshair",style:{touchAction:"none",display:"block"}})}),d==="upload"&&i("div",{className:"mb-5",children:[e("input",{ref:P,type:"file",accept:"image/jpeg,image/jpg,image/png",onChange:Ve,className:"hidden",id:"signature-upload"}),b?e("div",{className:"border-2 border-gray-300 rounded-xl overflow-hidden bg-white flex items-center justify-center",style:{height:"160px"},children:e("img",{src:b,alt:"Uploaded signature",className:"max-w-full max-h-full object-contain"})}):i("label",{htmlFor:"signature-upload",className:"flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-xl p-8 cursor-pointer hover:border-yellow-500 hover:bg-yellow-50 transition-all",style:{height:"160px"},children:[e("svg",{className:"w-12 h-12 text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e("p",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Click to upload signature"}),e("p",{className:"text-xs text-gray-500",children:"JPEG or PNG (max 2MB)"})]})]}),i("div",{className:"flex gap-2",children:[e("button",{onClick:Fe,className:"flex-1 px-4 py-2.5 border-2 border-gray-400 text-gray-700 rounded-lg hover:bg-gray-100 active:bg-gray-200 font-semibold text-sm transition-colors",children:"Clear"}),e("button",{onClick:()=>{U(!1),p("draw"),w(null),P.current&&(P.current.value="")},className:"flex-1 px-4 py-2.5 border-2 border-gray-400 text-gray-700 rounded-lg hover:bg-gray-100 active:bg-gray-200 font-semibold text-sm transition-colors",children:"Cancel"}),e("button",{onClick:Je,className:"flex-1 px-4 py-2.5 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 active:bg-yellow-700 font-semibold text-sm transition-colors shadow-md hover:shadow-lg",children:"Save"})]})]})}),ue&&e("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 overflow-y-auto",onClick:t=>{t.target===t.currentTarget&&(u(!1),O(""),B(""),C(""),k(""))},children:i("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-4 sm:p-6 max-w-md w-full shadow-2xl my-auto mx-auto",onClick:t=>t.stopPropagation(),children:[i("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[e("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Reset Password"}),e("button",{onClick:()=>{u(!1),O(""),B(""),C(""),k("")},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors sm:hidden","aria-label":"Close",children:e("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),A&&e("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-3 mb-4",children:e("p",{className:"text-xs sm:text-sm text-red-700 font-medium",children:A})}),i("div",{className:"space-y-3 sm:space-y-4 mb-4 sm:mb-6",children:[i("div",{children:[e("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:"Current Password"}),e("input",{type:"password",value:S,onChange:t=>O(t.target.value),placeholder:"Enter current password",className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-500 focus:outline-none transition-all text-sm sm:text-base",autoComplete:"current-password"})]}),i("div",{children:[e("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:"New Password"}),e("input",{type:"password",value:R,onChange:t=>B(t.target.value),placeholder:"Enter new password (min. 6 characters)",className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-500 focus:outline-none transition-all text-sm sm:text-base",autoComplete:"new-password"})]}),i("div",{children:[e("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:"Confirm New Password"}),e("input",{type:"password",value:Y,onChange:t=>C(t.target.value),placeholder:"Confirm new password",className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-500 focus:outline-none transition-all text-sm sm:text-base",autoComplete:"new-password"})]})]}),i("div",{className:"flex flex-col-reverse sm:flex-row gap-2 sm:gap-3",children:[e("button",{onClick:()=>{u(!1),O(""),B(""),C(""),k("")},className:"flex-1 px-4 py-2.5 sm:py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 active:bg-gray-100 font-semibold text-sm transition-colors touch-manipulation",children:"Cancel"}),e("button",{onClick:He,disabled:G,className:"flex-1 px-4 py-2.5 sm:py-3 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 active:bg-yellow-700 font-semibold text-sm disabled:opacity-60 disabled:cursor-not-allowed transition-colors shadow-md hover:shadow-lg touch-manipulation",children:G?"Resetting...":"Reset Password"})]})]})}),e("div",{className:"border-t border-white/10 p-3 bg-white/8",children:i("button",{type:"button",onClick:t=>{t.stopPropagation(),t.preventDefault(),Ce()},onTouchEnd:t=>{t.stopPropagation(),t.preventDefault(),Ce()},className:"w-full flex items-center justify-center gap-1 p-3 rounded-md bg-red-50 hover:bg-red-100 active:bg-red-200 text-red-600 font-semibold text-xs transition-colors min-h-[40px] touch-manipulation cursor-pointer",style:{touchAction:"manipulation"},children:[e("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})})]})})]});if(Z&&typeof document<"u"){const t=document.getElementById("settings-portal");t&&t.remove();const m=document.createElement("div");return m.id="settings-portal",m.setAttribute("key",Ge),document.body.appendChild(m),Xe.createPortal(Pe,m)}else return Pe}function vt(){const c=et(),o=je(),s=["/login","/signup"].includes(c.pathname),[r,n]=a.useState(!1),[l,h]=a.useState(""),[g,P]=a.useState(""),[d,p]=a.useState(""),[b,w]=a.useState(!1),[v,E]=a.useState(!1),[D,j]=a.useState([]),[te,ne]=a.useState(!1),[J,T]=a.useState(!1),[H,oe]=a.useState(()=>typeof window>"u"?!1:window.matchMedia("(max-width: 1023px)").matches),M=u=>c.pathname===u?"text-[#000000] text-sm font-bold leading-normal":"text-[#111418] text-sm font-medium leading-normal hover:text-[#000000] hover:font-bold transition-all duration-200";a.useEffect(()=>{se();const u=()=>{oe(window.matchMedia("(max-width: 1023px)").matches)};u(),window.addEventListener("resize",u),window.addEventListener("orientationchange",u);const x=()=>{se();try{w(!1),E(!1)}catch{}};return window.addEventListener("authStateChanged",x),()=>{window.removeEventListener("authStateChanged",x),window.removeEventListener("resize",u),window.removeEventListener("orientationchange",u)}},[]);const se=()=>{const u=localStorage.getItem("auth");if(u)try{const x=JSON.parse(u);n(x.isAuthenticated||!1),h(x.email||""),P(x.role||"")}catch(x){console.error("Error parsing auth data:",x);const W=localStorage.getItem("isLoggedIn")==="true",S=localStorage.getItem("userEmail"),O=localStorage.getItem("userRole");n(W),h(S||""),P(O||"")}else{const x=localStorage.getItem("isLoggedIn")==="true",W=localStorage.getItem("userEmail"),S=localStorage.getItem("userRole");n(x),h(W||""),P(S||"")}},de=async u=>{if(p(u),!u.trim()){j([]),T(!1);return}ne(!0),T(!0);try{const x=u.trim().toLowerCase(),W=localStorage.getItem("auth"),S=W?JSON.parse(W):null;if(!S){j([]),ne(!1);return}const O=[];if(S.role==="staff"||S.role==="hod")try{let R="/api/marksheets?includeAll=true";if(S.role==="staff"){const C=S._id||S.id||localStorage.getItem("userId");R+=`&staffId=${C}`}else S.role==="hod"&&(R+=`&department=${S.department}`);const Y=await(await fetch(R)).json();Y.success&&Y.marksheets.filter(A=>{var me,ie;const k=(((me=A.studentDetails)==null?void 0:me.name)||"").toLowerCase(),G=(((ie=A.studentDetails)==null?void 0:ie.regNumber)||"").toLowerCase(),le=(A.examinationName||"").toLowerCase();return k.includes(x)||G.includes(x)||le.includes(x)}).slice(0,5).forEach(A=>{var k,G;O.push({type:"marksheet",id:A._id,title:((k=A.studentDetails)==null?void 0:k.name)||"Unknown Student",subtitle:`${((G=A.studentDetails)==null?void 0:G.regNumber)||""} â€¢ ${A.examinationName||""}`,status:A.status,link:`/marksheets/${A._id}`})})}catch(R){console.error("Error searching marksheets:",R)}if(S.role==="hod")try{const B=await(await fetch(`/api/users?department=${S.department}`)).json();B.success&&B.users.filter(C=>{const A=(C.name||"").toLowerCase(),k=(C.email||"").toLowerCase();return A.includes(x)||k.includes(x)}).slice(0,3).forEach(C=>{O.push({type:"user",id:C._id,title:C.name||C.email,subtitle:`${C.role||"Staff"} â€¢ ${C.email||""}`,link:"/department-overview"})})}catch(R){console.error("Error searching users:",R)}j(O)}catch(x){console.error("Search error:",x),j([])}ne(!1)},U=u=>{u==null||u.preventDefault(),d.trim()&&D.length>0?(o(D[0].link),p(""),j([]),T(!1)):d.trim()&&(o(`/records?search=${encodeURIComponent(d.trim())}`),p(""),T(!1))},ue=u=>{o(u),p(""),j([]),T(!1)};return i("header",{className:"sticky top-0 z-50 glass-card flex items-center justify-between whitespace-nowrap px-3 sm:px-4 md:px-6 lg:px-8 xl:px-10 py-3 sm:py-4 mx-2 sm:mx-3 md:mx-4 mt-2 sm:mt-3 md:mt-4",onMouseEnter:()=>{typeof document<"u"&&document.body.classList.add("header-hover-active")},onMouseLeave:()=>{typeof document<"u"&&document.body.classList.remove("header-hover-active")},children:[i("div",{className:"flex items-center gap-3 sm:gap-4 md:gap-6 lg:gap-8 flex-1 min-w-0",children:[i("div",{className:"flex items-center gap-2 md:gap-3 flex-shrink-0",children:[e("div",{className:"size-9 sm:size-10 md:size-10",children:e("img",{src:"/images/mseclogo.png",alt:"MSEC Logo",className:"w-full h-full object-contain"})}),i("h2",{className:"text-base sm:text-lg md:text-xl font-bold leading-tight tracking-[-0.015em] whitespace-nowrap",children:[e("span",{className:"text-[#111418]",children:"MSEC"})," ",e("span",{className:"wave-text",children:"Academics"})]})]}),!s&&i("nav",{className:"hidden lg:flex items-center gap-4 xl:gap-5 2xl:gap-6 flex-shrink min-w-0",children:[e(N,{className:M("/"),to:"/",title:"Dashboard",children:"Dashboard"}),r&&g==="staff"&&i(X,{children:[e(N,{className:M("/marksheets"),to:"/marksheets",title:"Marksheets",children:"Marksheets"}),i(N,{className:M("/dispatch-requests"),to:"/dispatch-requests",title:"Dispatch Requests",children:[e("span",{className:"hidden xl:inline",children:"Dispatch Requests"}),e("span",{className:"xl:hidden",children:"Dispatch"})]}),e(N,{className:M("/records"),to:"/records",title:"Records",children:"Records"})]}),r&&g==="hod"&&i(X,{children:[i(N,{className:M("/department-overview"),to:"/department-overview",title:"Department Overview",children:[e("span",{className:"hidden xl:inline",children:"Department Overview"}),e("span",{className:"xl:hidden",children:"Department"})]}),i(N,{className:M("/approval-requests"),to:"/approval-requests",title:"Approval Requests",children:[e("span",{className:"hidden xl:inline",children:"Approval Requests"}),e("span",{className:"xl:hidden",children:"Approvals"})]}),e(N,{className:M("/reports"),to:"/reports",title:"Reports",children:"Reports"})]}),e(N,{className:M("/contact"),to:"/contact",title:"Contact",children:"Contact"})]})]}),!s&&i("div",{className:"hidden lg:flex items-center gap-2 lg:gap-3 xl:gap-4 flex-shrink-0",children:[i("form",{onSubmit:U,className:"relative !h-9 lg:!h-10 w-40 lg:w-48 xl:w-64",children:[e("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-[#60758a] pointer-events-none z-10",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18px",height:"18px",fill:"currentColor",viewBox:"0 0 256 256",className:"lg:w-5 lg:h-5",children:e("path",{d:"M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"})})}),e("input",{type:"text",value:d,onChange:u=>de(u.target.value),onFocus:()=>D.length>0&&T(!0),onBlur:()=>setTimeout(()=>T(!1),200),placeholder:"Search students, exams...",className:"form-input w-full h-full text-[#111418] focus:outline-0 focus:ring-0 border border-white/10 bg-white/30 backdrop-blur-sm placeholder:text-[#60758a] pl-9 lg:pl-10 pr-3 text-xs lg:text-sm font-normal leading-normal rounded-lg lg:rounded-xl relative z-0",onKeyPress:u=>{u.key==="Enter"&&U(u)}}),J&&D.length>0&&e("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-xl border border-gray-200 overflow-hidden z-50 max-h-96 overflow-y-auto",children:te?e("div",{className:"p-4 text-center text-gray-500 text-sm",children:"Searching..."}):i(X,{children:[D.map((u,x)=>e("button",{onClick:()=>ue(u.link),className:"w-full px-4 py-3 hover:bg-gray-50 text-left border-b border-gray-100 last:border-b-0 transition-colors",children:i("div",{className:"flex items-start gap-3",children:[e("div",{className:`mt-0.5 w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${u.type==="marksheet"?"bg-blue-100 text-blue-600":u.type==="user"?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"}`,children:u.type==="marksheet"?"ðŸ“„":u.type==="user"?"ðŸ‘¤":"ðŸ“‹"}),i("div",{className:"flex-1 min-w-0",children:[e("div",{className:"font-medium text-gray-900 text-sm truncate",children:u.title}),e("div",{className:"text-xs text-gray-500 truncate",children:u.subtitle}),u.status&&e("span",{className:`inline-block mt-1 px-2 py-0.5 rounded text-xs ${u.status==="draft"?"bg-gray-100 text-gray-700":u.status==="verified_by_staff"?"bg-blue-100 text-blue-700":u.status==="dispatch_requested"?"bg-yellow-100 text-yellow-700":u.status==="approved_by_hod"?"bg-green-100 text-green-700":u.status==="dispatched"?"bg-purple-100 text-purple-700":"bg-red-100 text-red-700"}`,children:u.status.replace(/_/g," ")})]})]})},x)),d&&i("button",{onClick:()=>{o(`/records?search=${encodeURIComponent(d.trim())}`),p(""),T(!1)},className:"w-full px-4 py-3 bg-gray-50 hover:bg-gray-100 text-left text-sm text-blue-600 font-medium transition-colors",children:['View all results for "',d,'"']})]})})]}),e("div",{className:"flex items-center gap-1 lg:gap-2 flex-shrink-0",children:r?e("div",{className:"flex items-center gap-1 lg:gap-2 relative",children:i("button",{onClick:()=>E(!v),className:"flex items-center gap-2 px-2 lg:px-3 h-9 lg:h-10 rounded-lg hover:bg-[#f0f2f5] transition-colors group",title:"Settings",children:[e("div",{className:"w-7 lg:w-8 h-7 lg:h-8 rounded-full bg-theme-gold-gradient flex items-center justify-center flex-shrink-0",children:e("span",{className:"text-xs lg:text-sm font-bold text-white",children:l==null?void 0:l.charAt(0).toUpperCase()})}),e("span",{className:"text-xs lg:text-sm font-medium text-[#111418] hidden xl:inline truncate max-w-[120px] lg:max-w-[150px] group-hover:text-theme-gold",children:l}),e("svg",{className:`w-3 lg:w-4 h-3 lg:h-4 text-[#60758a] transition-transform ${v?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}):e(N,{to:"/login",className:"flex min-w-[60px] lg:min-w-[70px] cursor-pointer items-center justify-center overflow-hidden rounded-lg lg:rounded-xl h-9 lg:h-10 px-3 lg:px-4 bg-theme-gold hover:bg-theme-gold-500 text-white text-xs lg:text-sm font-bold leading-normal tracking-[0.015em] whitespace-nowrap transition-all duration-200",children:e("span",{className:"truncate",children:"Login"})})})]}),!s&&e("button",{onClick:()=>w(!b),className:"lg:hidden flex items-center justify-center p-1.5 sm:p-2 text-[#111418] hover:bg-gray-100 rounded-lg transition-colors duration-200 ml-2 flex-shrink-0","aria-label":"Toggle menu",children:b?e("svg",{className:"w-5 sm:w-6 h-5 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):e("svg",{className:"w-5 sm:w-6 h-5 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),!s&&b&&e("div",{className:"lg:hidden absolute top-full left-0 right-0 bg-white/95 backdrop-blur-md border-b border-[#f0f2f5] shadow-lg rounded-b-2xl mx-2 sm:mx-3 md:mx-4",children:i("div",{className:"flex flex-col p-4 sm:p-5 space-y-4 sm:space-y-5",children:[e("form",{onSubmit:U,className:"flex flex-col w-full",children:e("div",{className:"flex w-full items-stretch rounded-xl h-11 sm:h-12",children:i("div",{className:"relative w-full",children:[e("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 sm:pl-4 text-[#60758a] pointer-events-none z-10",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18px",height:"18px",fill:"currentColor",viewBox:"0 0 256 256",className:"sm:w-5 sm:h-5",children:e("path",{d:"M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"})})}),e("input",{type:"text",value:d,onChange:u=>p(u.target.value),placeholder:"Search",className:"form-input w-full h-full text-[#111418] focus:outline-0 focus:ring-0 border border-gray-200 bg-gray-50 placeholder:text-[#60758a] pl-10 sm:pl-12 pr-3 sm:pr-4 text-sm sm:text-base font-normal leading-normal rounded-xl relative z-0"})]})})}),i("nav",{className:"flex flex-col space-y-2 sm:space-y-3",children:[e(N,{className:"text-[#111418] text-sm sm:text-base font-medium py-2.5 sm:py-3 px-3 sm:px-4 hover:text-theme-gold-500 hover:bg-theme-gold-50 rounded-lg transition-all duration-200 mobile-nav-item",to:"/",onClick:()=>w(!1),children:"Dashboard"}),r&&g==="staff"&&i(X,{children:[e(N,{className:"text-[#111418] text-sm sm:text-base font-medium py-2.5 sm:py-3 px-3 sm:px-4 hover:text-theme-gold-500 hover:bg-theme-gold-50 rounded-lg transition-all duration-200 mobile-nav-item",to:"/marksheets",onClick:()=>w(!1),children:"Marksheets"}),e(N,{className:"text-[#111418] text-sm sm:text-base font-medium py-2.5 sm:py-3 px-3 sm:px-4 hover:text-theme-gold-500 hover:bg-theme-gold-50 rounded-lg transition-all duration-200 mobile-nav-item",to:"/dispatch-requests",onClick:()=>w(!1),children:"Dispatch Requests"}),e(N,{className:"text-[#111418] text-sm sm:text-base font-medium py-2.5 sm:py-3 px-3 sm:px-4 hover:text-theme-gold-500 hover:bg-theme-gold-50 rounded-lg transition-all duration-200 mobile-nav-item",to:"/records",onClick:()=>w(!1),children:"Records"})]}),r&&g==="hod"&&i(X,{children:[e(N,{className:"text-[#111418] text-sm sm:text-base font-medium py-2.5 sm:py-3 px-3 sm:px-4 hover:text-theme-gold-500 hover:bg-theme-gold-50 rounded-lg transition-all duration-200 mobile-nav-item",to:"/department-overview",onClick:()=>w(!1),children:"Department Overview"}),e(N,{className:"text-[#111418] text-sm sm:text-base font-medium py-2.5 sm:py-3 px-3 sm:px-4 hover:text-theme-gold-500 hover:bg-theme-gold-50 rounded-lg transition-all duration-200 mobile-nav-item",to:"/approval-requests",onClick:()=>w(!1),children:"Approval Requests"}),e(N,{className:"text-[#111418] text-sm sm:text-base font-medium py-2.5 sm:py-3 px-3 sm:px-4 hover:text-theme-gold-500 hover:bg-theme-gold-50 rounded-lg transition-all duration-200 mobile-nav-item",to:"/reports",onClick:()=>w(!1),children:"Reports"})]}),e(N,{className:"text-[#111418] text-sm sm:text-base font-medium py-2.5 sm:py-3 px-3 sm:px-4 hover:text-theme-gold-500 hover:bg-theme-gold-50 rounded-lg transition-all duration-200 mobile-nav-item",to:"/contact",onClick:()=>w(!1),children:"Contact"})]}),e("div",{className:"flex flex-col gap-3 sm:gap-4 pt-3 sm:pt-4 border-t border-[#f0f2f5]",children:r?i(X,{children:[i("button",{onClick:()=>{E(!v),w(!1)},className:"flex items-center gap-3 sm:gap-4 p-3 sm:p-4 rounded-xl bg-gray-50 hover:bg-gray-100 transition-colors duration-200",children:[e("div",{className:"w-10 sm:w-12 h-10 sm:h-12 rounded-full bg-theme-gold-gradient flex items-center justify-center flex-shrink-0",children:e("span",{className:"text-sm sm:text-base font-bold text-white",children:l==null?void 0:l.charAt(0).toUpperCase()})}),i("div",{className:"flex-1 text-left min-w-0",children:[e("p",{className:"text-sm sm:text-base font-medium text-[#111418] truncate",children:l}),e("p",{className:"text-xs sm:text-sm text-[#60758a] capitalize",children:g})]}),i("svg",{className:"w-4 sm:w-5 h-4 sm:h-5 text-[#60758a] flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})]}),g==="staff"&&e(N,{to:"/marksheets",className:"flex items-center justify-center rounded-xl h-11 sm:h-12 px-4 bg-theme-gold hover:bg-theme-gold-500 text-white text-sm sm:text-base font-bold mobile-btn tablet-btn desktop-btn transition-all duration-200",onClick:()=>w(!1),children:"Go to Marksheets"}),g==="hod"&&e(N,{to:"/approval-requests",className:"flex items-center justify-center rounded-xl h-11 sm:h-12 px-4 bg-theme-gold hover:bg-theme-gold-500 text-white text-sm sm:text-base font-bold mobile-btn tablet-btn desktop-btn transition-all duration-200",onClick:()=>w(!1),children:"Approval Requests"})]}):i("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[e(N,{to:"/login",className:"flex-1 flex items-center justify-center rounded-xl h-11 sm:h-12 px-4 bg-theme-gold hover:bg-theme-gold-500 text-white text-sm sm:text-base font-bold mobile-btn tablet-btn desktop-btn transition-all duration-200",onClick:()=>w(!1),children:"Login"}),e(N,{to:"/login",className:"flex-1 flex items-center justify-center rounded-xl h-11 sm:h-12 px-4 border-2 border-theme-gold text-theme-gold hover:bg-theme-gold hover:text-white text-sm sm:text-base font-bold transition-all duration-200",onClick:()=>w(!1),children:"Get Started"})]})})]})}),v&&e(wt,{isOpen:v,onClose:()=>E(!1),userEmail:l,userRole:g,isMobile:H})]})}/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=c=>c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Nt=c=>c.replace(/^([A-Z])|[\s-_]+(\w)/g,(o,s,r)=>r?r.toUpperCase():s.toLowerCase()),De=c=>{const o=Nt(c);return o.charAt(0).toUpperCase()+o.slice(1)},We=(...c)=>c.filter((o,s,r)=>!!o&&o.trim()!==""&&r.indexOf(o)===s).join(" ").trim(),kt=c=>{for(const o in c)if(o.startsWith("aria-")||o==="role"||o==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var St={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=a.forwardRef(({color:c="currentColor",size:o=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:n="",children:l,iconNode:h,...g},P)=>a.createElement("svg",{ref:P,...St,width:o,height:o,stroke:c,strokeWidth:r?Number(s)*24/Number(o):s,className:We("lucide",n),...!l&&!kt(g)&&{"aria-hidden":"true"},...g},[...h.map(([d,p])=>a.createElement(d,p)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=(c,o)=>{const s=a.forwardRef(({className:r,...n},l)=>a.createElement(Et,{ref:l,iconNode:o,className:We(`lucide-${yt(De(c))}`,`lucide-${c}`,r),...n}));return s.displayName=De(c),s};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Pt=ae("circle-alert",Ct);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],_t=ae("circle-check-big",Lt);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],It=ae("info",At);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Mt=ae("triangle-alert",Dt);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Tt=ae("x",Rt);function jt({type:c="info",title:o,message:s,onClose:r,autoClose:n=!0,duration:l=5e3,position:h="top-right"}){a.useEffect(()=>{if(n&&r){const p=setTimeout(r,l);return()=>clearTimeout(p)}},[n,l,r]);const g={success:e(_t,{className:"w-6 h-6 text-green-400"}),error:e(Pt,{className:"w-6 h-6 text-red-400"}),warning:e(Mt,{className:"w-6 h-6 text-yellow-400"}),info:e(It,{className:"w-6 h-6 text-blue-400"})},P={success:"border-green-400/30",error:"border-red-400/30",warning:"border-yellow-400/30",info:"border-blue-400/30"};return e("div",{className:`${{"top-right":"notification-container notification-top-right","top-left":"notification-container notification-top-left","top-center":"notification-container notification-top-center","bottom-right":"notification-container notification-bottom-right","bottom-left":"notification-container notification-bottom-left","bottom-center":"notification-container notification-bottom-center",center:"notification-container notification-center"}[h]}`,children:i("div",{className:`
          glass-notification notification-interactive
          relative w-full sm:min-w-[320px] sm:max-w-md 
          rounded-2xl sm:rounded-3xl
          border-2 ${P[c]}
          p-4 sm:p-5
          before:absolute before:inset-0 
          before:rounded-2xl sm:before:rounded-3xl 
          before:bg-gradient-to-br 
          before:from-white/20 before:to-transparent 
          before:pointer-events-none
          transform-gpu
        `,children:[r&&e("button",{onClick:r,className:`absolute top-3 sm:top-4 right-3 sm:right-4 \r
                     p-1.5 sm:p-2 rounded-lg sm:rounded-xl\r
                     bg-white/60 hover:bg-white/80 active:bg-white/90\r
                     backdrop-blur-sm border border-white/20\r
                     transition-all duration-200 \r
                     hover:scale-110 active:scale-95\r
                     shadow-sm hover:shadow-md\r
                     touch-manipulation`,"aria-label":"Close alert",style:{touchAction:"manipulation"},children:e(Tt,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-700"})}),i("div",{className:"flex items-start gap-3 sm:gap-4 pr-8 sm:pr-10",children:[e("div",{className:"flex-shrink-0 mt-1 p-2 rounded-xl bg-white/40 backdrop-blur-sm",children:g[c]}),i("div",{className:"flex-1 min-w-0 pt-1",children:[o&&e("h3",{className:`alert-title text-gray-900 font-bold text-sm sm:text-base mb-1.5 \r
                           drop-shadow-sm break-words leading-tight`,children:o}),s&&e("p",{className:`alert-message text-gray-700 text-xs sm:text-sm leading-relaxed \r
                          drop-shadow-sm break-words opacity-90`,children:s})]})]}),n&&e("div",{className:`absolute bottom-0 left-0 right-0 h-1.5 sm:h-2 \r
                        bg-white/10 rounded-b-2xl sm:rounded-b-3xl overflow-hidden`,children:e("div",{className:`h-full bg-gradient-to-r from-theme-gold-400 to-theme-gold-600\r
                       shadow-sm`,style:{animation:`progress ${l}ms linear forwards`}})})]})})}const Be=a.createContext();function Ot({children:c}){const[o,s]=a.useState([]),r=a.useCallback(({type:d="info",title:p,message:b,duration:w=5e3,position:v="top-right",autoClose:E=!0})=>{const D=Date.now()+Math.random();return s(j=>[...j,{id:D,type:d,title:p,message:b,duration:w,position:v,autoClose:E}]),D},[]),n=a.useCallback(d=>{s(p=>p.filter(b=>b.id!==d))},[]),l=a.useCallback((d,p,b={})=>r({type:"success",title:d,message:p,...b}),[r]),h=a.useCallback((d,p,b={})=>r({type:"error",title:d,message:p,...b}),[r]),g=a.useCallback((d,p,b={})=>r({type:"warning",title:d,message:p,...b}),[r]),P=a.useCallback((d,p,b={})=>r({type:"info",title:d,message:p,...b}),[r]);return i(Be.Provider,{value:{showAlert:r,hideAlert:n,showSuccess:l,showError:h,showWarning:g,showInfo:P},children:[c,o.map(d=>e(jt,{type:d.type,title:d.title,message:d.message,duration:d.duration,position:d.position,autoClose:d.autoClose,onClose:()=>n(d.id)},d.id))]})}function oo(){const c=a.useContext(Be);if(!c)throw new Error("useAlert must be used within AlertProvider");return c}const zt=a.lazy(()=>_(()=>import("./Home-1bd3721f.js"),["assets/Home-1bd3721f.js","assets/react-vendor-07fa9950.js"])),Wt=a.lazy(()=>_(()=>import("./ImportMarks-354fe803.js"),["assets/ImportMarks-354fe803.js","assets/react-vendor-07fa9950.js"])),Bt=a.lazy(()=>_(()=>import("./Marksheets-6f939a5b.js"),["assets/Marksheets-6f939a5b.js","assets/react-vendor-07fa9950.js","assets/Confetti-c097a8ab.js","assets/ContextualHelp-b538d0c7.js"])),$t=a.lazy(()=>_(()=>import("./MarksheetDetails-6e59d624.js"),["assets/MarksheetDetails-6e59d624.js","assets/react-vendor-07fa9950.js"])),Ut=a.lazy(()=>_(()=>import("./DispatchRequests-364b67eb.js"),["assets/DispatchRequests-364b67eb.js","assets/react-vendor-07fa9950.js","assets/RefreshButton-70383c8a.js"])),qt=a.lazy(()=>_(()=>import("./Records-1c927cff.js"),["assets/Records-1c927cff.js","assets/react-vendor-07fa9950.js"])),Ft=a.lazy(()=>_(()=>import("./DepartmentOverview-89534bc1.js"),["assets/DepartmentOverview-89534bc1.js","assets/react-vendor-07fa9950.js"])),Vt=a.lazy(()=>_(()=>import("./ApprovalRequests-ceb27f52.js"),["assets/ApprovalRequests-ceb27f52.js","assets/react-vendor-07fa9950.js","assets/RefreshButton-70383c8a.js","assets/Confetti-c097a8ab.js","assets/ContextualHelp-b538d0c7.js"])),Jt=a.lazy(()=>_(()=>import("./Reports-32641c36.js"),["assets/Reports-32641c36.js","assets/react-vendor-07fa9950.js","assets/ContextualHelp-b538d0c7.js"])),Ht=a.lazy(()=>_(()=>import("./Login-98b03842.js"),["assets/Login-98b03842.js","assets/react-vendor-07fa9950.js"])),Yt=a.lazy(()=>_(()=>import("./SignUp-e617694b.js"),["assets/SignUp-e617694b.js","assets/react-vendor-07fa9950.js"])),Gt=a.lazy(()=>_(()=>import("./Contact-0ad18bc2.js"),["assets/Contact-0ad18bc2.js","assets/react-vendor-07fa9950.js"])),Zt=a.lazy(()=>_(()=>import("./PrivacyPolicy-44c57315.js"),["assets/PrivacyPolicy-44c57315.js","assets/react-vendor-07fa9950.js"])),Kt=a.lazy(()=>_(()=>import("./TermsOfService-48d305aa.js"),["assets/TermsOfService-48d305aa.js","assets/react-vendor-07fa9950.js"])),Qt=a.lazy(()=>_(()=>import("./FAQ-3d019907.js"),["assets/FAQ-3d019907.js","assets/react-vendor-07fa9950.js"])),Xt=a.lazy(()=>_(()=>import("./NotFound-3aacd3bf.js"),["assets/NotFound-3aacd3bf.js","assets/react-vendor-07fa9950.js"])),eo=()=>e(ut,{});function Me(){return e(mt,{children:e(Ot,{children:e(tt,{children:e("div",{className:"relative flex w-full min-h-screen flex-col bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 overflow-x-hidden smooth-scroll",style:{fontFamily:"Inter, Manrope, sans-serif"},children:i("div",{className:"layout-container flex h-full grow flex-col max-w-full",children:[e(vt,{}),e("div",{className:"flex flex-1 justify-center w-full",children:e("div",{className:"layout-content-container flex flex-col w-full max-w-full",children:e(a.Suspense,{fallback:e(eo,{}),children:i(ot,{children:[e(L,{path:"/",element:e(zt,{})}),e(L,{path:"/import-marks",element:e(Wt,{})}),e(L,{path:"/marksheets",element:e(Bt,{})}),e(L,{path:"/marksheets/:id",element:e($t,{})}),e(L,{path:"/dispatch-requests",element:e(Ut,{})}),e(L,{path:"/records",element:e(qt,{})}),e(L,{path:"/department-overview",element:e(Ft,{})}),e(L,{path:"/approval-requests",element:e(Vt,{})}),e(L,{path:"/reports",element:e(Jt,{})}),e(L,{path:"/login",element:e(Ht,{})}),e(L,{path:"/signup",element:e(Yt,{})}),e(L,{path:"/contact",element:e(Gt,{})}),e(L,{path:"/privacy-policy",element:e(Zt,{})}),e(L,{path:"/terms-of-service",element:e(Kt,{})}),e(L,{path:"/faq",element:e(Qt,{})}),e(L,{path:"*",element:e(Xt,{})})]})})})})]})})})})})}window.addEventListener("unhandledrejection",c=>{var o,s,r,n;if((s=(o=c.reason)==null?void 0:o.message)!=null&&s.includes("Receiving end does not exist")||(n=(r=c.reason)==null?void 0:r.message)!=null&&n.includes("Could not establish connection")){c.preventDefault();return}});const $e=document.getElementById("root");if(!$e)throw new Error("Root element not found");const Re=be.createRoot($e);try{Re.render(e(Te.StrictMode,{children:e(Me,{})}))}catch(c){console.error("Failed to render app:",c),Re.render(e(Me,{}))}export{X as F,Tt as X,i as a,ae as c,e as j,oo as u};
